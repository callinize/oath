/*!
 * oath - Node.js event emitter.
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

!function(a,b){typeof module!="undefined"?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("oath",function(){function c(a){var b=this;a=a||{},this.pending=[],this._options={parent:a.parent||null,context:a.context||this},this.resolve=function(a){b.complete("resolve",a)},this.reject=function(a){b.complete("reject",a)}}if(!a)var a={};var b=a.exports=c;return b.version="0.0.5",c.prototype.then=function(a,b){var c=this._options.context,d={resolve:null,reject:null};return a&&(d.resolve=function(){a.apply(c,arguments)}),b&&(d.reject=function(){b.apply(c,arguments)}),this.pending.push(d),this},c.prototype.get=function(a){var b=new c({parent:this});return this.then(function(c){b.resolve(c[a])},function(a){b.reject(a)}),b},c.prototype.pop=function(){return this._options.parent?this._options.parent:this},c.prototype.call=function(a){var b=arguments;return this.then(function(c){return c[a].apply(c,Array.prototype.slice.call(b,1))})},c.prototype.complete=function(a,b){var c;while(this.pending[0])c=this.pending.shift()[a],c&&"function"==typeof c&&c(b)},b})